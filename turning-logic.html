
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Turning Logic Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="session-3.html" />
    
    
    <link rel="prev" href="fields.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Instruction Notes</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="type-along.html">
            
                <a href="type-along.html">
            
                    
                    Type-along Coding
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="errors.html">
            
                <a href="errors.html">
            
                    
                    Errors
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Context</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="history.html">
            
                <a href="history.html">
            
                    
                    History
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="lesson-plan.html">
            
                <a href="lesson-plan.html">
            
                    
                    Lesson Plan
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="setup.html">
            
                <a href="setup.html">
            
                    
                    Setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="session-1.html">
            
                <a href="session-1.html">
            
                    
                    Session 1
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.2.1" data-path="semantics.html">
            
                <a href="semantics.html">
            
                    
                    How Unity Works
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2.2" data-path="ui.html">
            
                <a href="ui.html">
            
                    
                    Unity's UI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2.3" data-path="play-and-hack.html">
            
                <a href="play-and-hack.html">
            
                    
                    Play and Hack
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.1.3" data-path="session-2.html">
            
                <a href="session-2.html">
            
                    
                    Session 2
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.3.1" data-path="csharp-vs-unity.html">
            
                <a href="csharp-vs-unity.html">
            
                    
                    C# vs Unity
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3.2" data-path="enemy-setup.html">
            
                <a href="enemy-setup.html">
            
                    
                    Setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3.3" data-path="boilerplate.html">
            
                <a href="boilerplate.html">
            
                    
                    Boilerplate
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3.4" data-path="fields.html">
            
                <a href="fields.html">
            
                    
                    Fields
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="4.1.3.5" data-path="turning-logic.html">
            
                <a href="turning-logic.html">
            
                    
                    Turning Logic
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.1.4" data-path="session-3.html">
            
                <a href="session-3.html">
            
                    
                    Session 3
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.4.1" data-path="destroy-setup.html">
            
                <a href="destroy-setup.html">
            
                    
                    Setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.4.2" data-path="collision.html">
            
                <a href="collision.html">
            
                    
                    Collision Detection
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.4.3" data-path="tags.html">
            
                <a href="tags.html">
            
                    
                    Tags
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.1.5" data-path="session-4.html">
            
                <a href="session-4.html">
            
                    
                    Session 4
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.5.1" data-path="shoot-back-setup.html">
            
                <a href="shoot-back-setup.html">
            
                    
                    Setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.5.2" data-path="instantiating.html">
            
                <a href="instantiating.html">
            
                    
                    Instantiating
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.5.3" data-path="timers.html">
            
                <a href="timers.html">
            
                    
                    Timers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.5.4" data-path="prefabs.html">
            
                <a href="prefabs.html">
            
                    
                    Prefabs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Turning Logic</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="session-2">Session 2</h1>
<h2 id="turning-logic">Turning Logic</h2>
<p>Now that the <code>target</code> field has a value, making the enemy turn to face it is a single line of code, but that line is quite dense. Add</p>
<pre><code class="lang-cs">transform.up = target.transform.position - transform.position;
</code></pre>
<p>to the Update method, such that the code now looks like:</p>
<pre><code class="lang-cs"><span class="hljs-keyword">using</span> System.Collections;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> UnityEngine;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AlwaysLookAt</span> : <span class="hljs-title">MonoBehaviour</span> {
    <span class="hljs-keyword">public</span> GameObject target;

    <span class="hljs-comment">// Use this for initialization</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span> (<span class="hljs-params"></span>) </span>{

    }

    <span class="hljs-comment">// Update is called once per frame</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span> (<span class="hljs-params"></span>) </span>{
      transform.up = target.transform.position - transform.position;
    }
}
</code></pre>
<p>Hit play in Unity and the enemy should start looking at the player!</p>
<h3 id="explanation">Explanation</h3>
<p>One way to read this line of code is &quot;set the <em>up</em> direction of this GameObject to be the difference between the <em>target&apos;s position</em> and <em>this GameObject&apos;s position</em>&quot;. To understand that, we need to talk about the Transform component and some linear algebra</p>
<h4 id="the-transform-component">The Transform Component</h4>
<p><img src="o2asD19cELsf6sMdpFVQ.png" alt=""></p>
<p>Every GameObject in Unity gets a <a href="https://docs.unity3d.com/ScriptReference/Transform.html" target="_blank">Transform component</a>. It stores the position, rotation, and scale of the GameObject, and enables the nesting of GameObjects (it keeps track of children and parents). It&apos;s so important to Unity that you can&apos;t even remove it!</p>
<p>Since the Transform component controls rotation, if we want our <code>AlwaysLookAt</code> component to rotate the GameObject it has to talk to the Transform component. There are a few ways to do this, including the <a href="https://docs.unity3d.com/ScriptReference/Transform.Rotate.html" target="_blank"><code>Rotate</code></a> method, or setting the <a href="https://docs.unity3d.com/ScriptReference/Transform-rotation.html" target="_blank"><code>rotation</code></a> or <a href="https://docs.unity3d.com/ScriptReference/Transform-eulerAngles.html" target="_blank"><code>eulerAngles</code></a> properties.</p>
<p>For the purposes of this script, however, the easiest thing to do is to <em>set the <a href="https://docs.unity3d.com/ScriptReference/Transform-up.html" target="_blank"><code>up</code></a> property</em>. The <code>up</code> property corresponds to the green axis as seen in the scene view.</p>
<p><img src="fJYe17TGoFV3hXRKKF59w.png" alt=""></p>
<p>It is a vector, so it is an indication of direction. Assigning it a new value will rotate the object so that the green arrow is facing this new direction. Since our green arrow lines up with the front of the enemy, this causes the enemy to turn and &quot;face&quot; in that new direction!</p>
<h5 id="syntax">Syntax</h5>
<p>The <code>.</code> operator is the <em>member access</em> operator. You can read <code>transform.up</code> as &quot;get the thing called <code>up</code> from inside the <code>transform</code> object&quot;. Here, <code>transform</code> is shorthand for <code>this.transform</code>, which in turn is shorthand for <code>this.gameObject.transform</code>. <a href="https://msdn.microsoft.com/en-us/library/dk1507sz.aspx" target="_blank"><code>this</code></a> is a special keyword in C# that refers to the <em>current</em> object that your code is running on, in this case the <code>AlwaysLookAt</code> component. The <a href="https://docs.unity3d.com/ScriptReference/Component-gameObject.html" target="_blank"><code>gameObject</code></a> field refers to the GameObject the component is attached to, and the <code>transform</code> field refers to the Transform component attached to that GameObject. So, <code>transform.up</code> can be read as &quot;get the <code>up</code> property of the Transform component attached to the same GameObject as me&quot; from the perspective of the <code>AlwaysLookAt</code> component.</p>
<p>Assigning a new value is done with the <code>=</code> operator, which assigns the result of the expression on the right of the <code>=</code> symbol to whatever is on the left of the <code>=</code> symbol. <code>transform.up = target.transform.position - transform.position;</code> can be read as &quot;Assign to the up property of the Transform component attached to the same GameObject as me the result of <code>target.transform.position - transform.position</code>&quot;.</p>
<p>We are subtracting two values, <code>target.transform.position</code> and <code>transform.position</code>. Both are accessing the <a href="https://docs.unity3d.com/ScriptReference/Transform-position.html" target="_blank"><code>position</code></a> property of Transform components, but they&apos;re accessing them on different GameObjects. Recall that <code>target</code> is a field that we set up that was of type <code>GameObject</code> and we associated it with the Player&apos;s GameObject. When we say <code>target.transform.position</code>, we&apos;re accessing the position property of the Transform component attached to the GameObject associated with <code>target</code>, in this case the Player. When we say <code>transform.position</code>, we are using the same shorthands mentioned above to access the position property on the Transform component of the GameObject this component is attached to. So we are subtracting the position of the GameObject <code>AlwaysLookAt</code> is attached to (the enemy) from the position of the <code>target</code> (the player).</p>
<p>But what does subtracting positions give us?</p>
<h4 id="linear-algebra">Linear Algebra</h4>
<p>In addition to logic, certain kinds of math are unavoidable in game development. Chief among them is <em>linear algebra</em>, the mathematics of vectors, matrices, and space. Using the fact that points in space can be interpreted as vectors from the origin to those points, we can see below on the right that subtracting two points gives us <em>a vector pointing from one to the other</em>.</p>
<p><img src="I4QAvkePbYpU2AEo0ng.png" alt=""></p>
<blockquote>
<p><em>From <a href="http://www.askiitians.com/iit-jee-physics/general-physics/addition-and-subtraction-of-vectors.aspx" target="_blank">http://www.askiitians.com/iit-jee-physics/general-physics/addition-and-subtraction-of-vectors.aspx</a></em></p>
</blockquote>
<p>Imagine that the enemy GameObject is at <em>b</em> in the above example, and the Player is at <em>a</em>. Subtracting their positions gives us the vector to look at in order for <em>b</em> to face <em>a</em>, for the enemy to face the player. If we set the green axis (<code>transform.up</code>) to this vector, the enemy will turn to align itself and appear to look at the player.</p>
<h3 id="experiments">Experiments</h3>
<p>A good way to drive home abstract concepts like these is with miniature experiments. Try the following as a class, and discuss the differences you observe:</p>
<ol>
<li>Replace the line of code in Update with<ol>
<li><code>transform.up = transform.position - target.transform.position;</code></li>
<li><code>transform.right = target.transform.position - transform.position;</code></li>
<li><code>transform.up = -1 * (target.transform.position - transform.position);</code></li>
<li><code>transform.up = Vector3.right</code></li>
</ol>
</li>
<li>In the inspector, associate different objects with <code>target</code></li>
</ol>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="fields.html" class="navigation navigation-prev " aria-label="Previous page: Fields">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="session-3.html" class="navigation navigation-next " aria-label="Next page: Session 3">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Turning Logic","level":"4.1.3.5","depth":3,"next":{"title":"Session 3","level":"4.1.4","depth":2,"path":"session-3.md","ref":"session-3.md","articles":[{"title":"Setup","level":"4.1.4.1","depth":3,"path":"destroy-setup.md","ref":"destroy-setup.md","articles":[]},{"title":"Collision Detection","level":"4.1.4.2","depth":3,"path":"collision.md","ref":"collision.md","articles":[]},{"title":"Tags","level":"4.1.4.3","depth":3,"path":"tags.md","ref":"tags.md","articles":[]}]},"previous":{"title":"Fields","level":"4.1.3.4","depth":3,"path":"fields.md","ref":"fields.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["livereload"],"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"turning-logic.md","mtime":"2017-03-10T22:34:08.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-03-10T22:40:24.304Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

